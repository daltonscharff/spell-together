(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[917],{8891:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rooms/[shortcode]",function(){return r(3369)}])},881:function(e,n,r){"use strict";var t=r(2322);n.Z=function(e){var n=e.onClick,r=e.children;return(0,t.jsx)("button",{onClick:n,className:"p-3 px-6 rounded-full border border-zinc-300 xs:w-24",children:r})}},3369:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return P}});var t=r(2322),o=r(5632),s=[{id:"top",x:75,y:0},{id:"top-left",x:0,y:43.3},{id:"top-right",x:0,y:129.9},{id:"bottom",x:75,y:173.2},{id:"bottom-left",x:150,y:43.3},{id:"bottom-right",x:150,y:129.9}],i={strokeWidth:"6px",stroke:"white",cursor:"pointer"},c={dominantBaseline:"middle",textAnchor:"middle",cursor:"pointer"},l=function(e){var n=e.outerLetters,r=e.centerLetter,o=e.onClick,l=void 0===o?function(e){}:o;return r=r.toUpperCase(),n=n.map((function(e){return e.toUpperCase()})),(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 250 259.8",className:"max-w-[280px] mx-auto",children:[(0,t.jsxs)("defs",{children:[(0,t.jsx)("symbol",{id:"hexagon",children:(0,t.jsx)("polygon",{points:"25 0, 75 0, 100 43.3, 75 86.6, 25 86.6, 0 43.3"})}),n.map((function(e,n){return(0,t.jsxs)("symbol",{id:s[n].id,children:[(0,t.jsx)("use",{href:"#hexagon",style:i,className:"fill-zinc-200"}),(0,t.jsx)("text",{x:"50%",y:"55%",style:c,className:"font-bold text-3xl",children:e})]},e+n)})),(0,t.jsxs)("symbol",{id:"center",children:[(0,t.jsx)("use",{href:"#hexagon",style:i,className:"fill-yellow-300"}),(0,t.jsx)("text",{x:"50%",y:"55%",style:c,className:"font-bold text-3xl",children:r})]})]}),n.map((function(e,n){return(0,t.jsx)("use",{href:"#".concat(s[n].id),onClick:function(){return l(e)},x:s[n].x,y:s[n].y,width:"100",height:"86.6"},e+n)})),(0,t.jsx)("use",{href:"#center",onClick:function(){return l(r)},x:"75",y:"86.6",width:"100",height:"86.6"})]})},a=r(2784);var d=function(e){var n=e.value,r=e.outerLetters,o=e.centerLetter,s=e.onChange,i=(0,a.useState)(!0),c=i[0],l=i[1];return(0,a.useEffect)((function(){var e=function(e){s(e.key)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[s]),(0,a.useEffect)((function(){var e=function(){return l(!0)},n=function(){return l(!1)};return window.addEventListener("focus",e),window.addEventListener("blur",n),function(){window.removeEventListener("focus",e),window.removeEventListener("blur",n)}}),[]),(0,t.jsxs)("div",{className:"font-black text-3xl text-center py-3 flex flex-wrap justify-center rounded",children:[n.toUpperCase().split("").map((function(e,n){var s="";switch(function(e,n,r){return(e=e.toLowerCase())===r?"center":n.map((function(e){return e.toLowerCase()})).includes(e)?"valid":"invalid"}(e,r,o)){case"center":s="text-yellow-300";break;case"valid":s="text-black";break;default:s="text-zinc-300"}return(0,t.jsx)("span",{className:"".concat(s),children:e},n)})),(0,t.jsx)("div",{className:"animate-blink mx-[2px] h-9 w-[2px] bg-yellow-300 ".concat(!c&&"invisible")}),!c&&0===n.length&&(0,t.jsx)("div",{className:"font-normal text-zinc-300",children:"Type or click..."})]})},u=r(881),f=function(e){var n=e.onClick;return(0,t.jsx)("button",{onClick:n,className:"p-3 rounded-full border border-zinc-300 flex justify-center",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 100 100",className:"w-6",children:[(0,t.jsx)("circle",{cx:"50",cy:"50",r:"47",stroke:"black",strokeWidth:"6",fill:"white"}),(0,t.jsx)("line",{x1:"0",y1:"0",x2:"100",y2:"100",strokeWidth:"20",stroke:"white"}),(0,t.jsx)("polygon",{points:"14,0 14,20 34,20",fill:"black"}),(0,t.jsx)("polygon",{points:"86,100 86,80 66,80",fill:"black"})]})})},x={adjective:"adj.",adverb:"adv.",conjunction:"conj.",interjection:"interj.",noun:"n.",preposition:"prep.",pronoun:"pron.",verb:"v."},m=function(e){var n,r,o,s,i=e.record,c=e.isExpanded,l=void 0===c||c;return(0,t.jsxs)("div",{className:"border-b border-zinc-100 px-2 w-full",children:[(0,t.jsxs)("div",{className:"flex items-end",children:[(0,t.jsx)("div",{className:"flex-grow",children:(0,t.jsx)("span",{className:"".concat((null===(n=i.word)||void 0===n?void 0:n.isPangram)&&"bg-yellow-300"),children:null===(r=i.word)||void 0===r?void 0:r.word})}),(0,t.jsx)("div",{className:"font-light",children:i.username})]}),(null===(o=i.word)||void 0===o?void 0:o.partOfSpeech)&&(null===(s=i.word)||void 0===s?void 0:s.definition)&&l&&(0,t.jsxs)("div",{className:"text-sm pb-1 font-light",children:[(0,t.jsxs)("span",{className:"pr-1",children:[x[i.word.partOfSpeech],","]}),(0,t.jsx)("span",{children:i.word.definition})]})]})};function h(e){return function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var v=function(e){var n=e.foundWords,r=e.collapsible,o=void 0!==r&&r,s=(0,a.useState)(!0),i=s[0],c=s[1];return o&&i?(0,t.jsxs)("div",{className:"flex-grow flex flex-row border border-zinc-300 rounded-lg p-3 capitalize",children:[(0,t.jsxs)("div",{className:"flex flex-row flex-grow overflow-hidden",children:[h(n).sort((function(e,n){return e.createdAt<n.createdAt?1:-1})).map((function(e,n){var r,o;return(0,t.jsx)("div",{className:"px-1 ".concat((null===(r=e.word)||void 0===r?void 0:r.isPangram)&&"bg-yellow-300"),children:null===(o=e.word)||void 0===o?void 0:o.word.toLowerCase()},n)})),0===n.length&&(0,t.jsx)("div",{className:"text-zinc-300 normal-case",children:"Your words..."})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute right-8 bg-gradient-to-l from-white w-4 h-full"}),(0,t.jsx)("div",{className:"px-1 ml-2",onClick:function(){return c(!i)},children:(0,t.jsx)("i",{className:"bx bxs-chevron-down"})})]})]}):(0,t.jsxs)("div",{className:"flex-grow border border-zinc-300 rounded-lg p-3 h-full",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)("div",{className:"flex-grow mb-3",children:["This room has found ",n.length," ",1===n.length?"word":"words"]}),o&&(0,t.jsx)("div",{className:"px-1 ml-2",onClick:function(){return c(!i)},children:(0,t.jsx)("i",{className:"bx bxs-chevron-up"})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap max-h-[500px] overflow-auto",children:[h(n).sort((function(e,n){var r,t;return(null===(r=e.word)||void 0===r?void 0:r.word)>(null===(t=n.word)||void 0===t?void 0:t.word)?1:-1})).map((function(e,n){return(0,t.jsx)(m,{record:e},e.id)})),0===n.length&&(0,t.jsx)("div",{className:"text-zinc-300",children:"Your words..."})]})]})},p=[{rank:"beginner",percent:0},{rank:"good start",percent:2},{rank:"moving up",percent:5},{rank:"good",percent:8},{rank:"solid",percent:15},{rank:"nice",percent:25},{rank:"great",percent:40},{rank:"amazing",percent:50},{rank:"genius",percent:70}];var w=function(e){var n=e.currentScore,r=e.maxScore,o=function(e,n){var r=e/n*100,t=p.findIndex((function(e){return e.percent>r}));return-1===t?p.length-1:t-1}(n,r),s=p[o].rank;return(0,t.jsxs)("div",{className:"flex items-center text-sm",children:[(0,t.jsx)("span",{className:"capitalize font-black mr-3 w-28",children:s}),(0,t.jsx)("span",{className:"flex justify-between items-center w-full",children:p.map((function(e,r){return(0,t.jsxs)("div",{className:"flex ".concat(r!==p.length-1?"flex-grow":""," justify-between items-center"),children:[(0,t.jsx)("span",{className:"text-center align-middle ".concat(r===o?"w-7 h-7 leading-7":"w-2 h-2"," ").concat(r<p.length-1?"rounded-full":"rounded-none"," ").concat(r<=o?"bg-yellow-300":"bg-zinc-200"),children:r===o?n:""},r),r!==p.length-1?(0,t.jsx)("span",{className:"border border-zinc-200 flex-grow"}):""]},r)}))})]})},j=r(8879),g=r.n(j),b=function(e){var n=e.date,r=e.username;return(0,t.jsx)("header",{className:"border-b border-zinc-300",children:(0,t.jsxs)("div",{className:"max-w-screen-lg mx-auto flex flex-row items-end py-4 px-3",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:gap-4 sm:flex-row pr-4 flex-grow sm:items-end",children:[(0,t.jsx)("div",{className:"font-RobotoSlab text-3xl",children:"Spell Together"}),(0,t.jsx)("div",{className:"font-light text-xl",children:g()(n).format("MMMM D, YYYY")})]}),r&&(0,t.jsx)("div",{className:"font-light",children:r})]})})},y=function(){return(0,t.jsx)("div",{style:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,t.jsx)("div",{style:{border:".3rem solid #f3f3f3",borderTop:".3rem solid rgb(250 204 21)",borderRadius:"50%",width:"3rem",height:"3rem",animation:"spin 1.5s linear infinite"}})})},N=r(9857);function k(e){return function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var E=r(4406);async function C(e){var n=E.env.NEXT_PUBLIC_SERVER_URL||"";try{return(await fetch(new URL(e,n).href)).json()}catch(r){console.log(r)}}var L=function(e,n,r){n.length>20||r(n+e.toLowerCase())},S=function(e,n){return n(e.slice(0,e.length-1))},z=function(e,n,r,t,o){r.emit("user:guess",{username:e,shortcode:n,word:t}),o("")},_=r(3744),A=r(4406).env.NEXT_PUBLIC_SERVER_URL||"",R=(0,_.io)(A);R.on("error",(function(e){return console.log(e)}));function T(e,n){return(0,a.useEffect)((function(){return R.on(e,n),function(){R.off(e,n)}}),[e,n]),R}var O=function(e){var n=e.children,r=(0,a.useState)(),o=r[0],s=r[1],i=(0,a.useState)(),c=i[0],l=i[1],d=function(e){s(e),l("animate-[fadeOut_2000ms]"),setTimeout((function(){s(""),l("")}),2e3)};return T("incorrectGuess",(function(){return d("bg-red-100")})),T("correctGuess",(function(){return d("bg-green-400/20")})),(0,t.jsx)("div",{className:"w-full rounded-lg min-h-[.25rem] ".concat(o," ").concat(c),children:n})},P=function(){var e,n=null===(e=(0,o.useRouter)().query.shortcode)||void 0===e?void 0:e.toString(),r="test user",s=(0,a.useState)(),i=s[0],c=s[1],x=(0,a.useState)([]),m=x[0],h=x[1],p=(0,a.useState)([]),j=p[0],g=p[1],E=(0,a.useState)(""),_=E[0],A=E[1],P=(0,a.useState)(0),U=P[0],I=P[1],W=(0,N.ZP)("/api/puzzles",C),B=W.data,M=(W.error,(0,N.ZP)(n?"/api/records/".concat(n):null,C).data);return(0,a.useEffect)((function(){R.emit("user:joinRoom",{username:r,shortcode:n})}),[n]),(0,a.useEffect)((function(){B&&(c(B[0]),g(B[0].outerLetters))}),[B]),(0,a.useEffect)((function(){M&&h(M)}),[M]),(0,a.useEffect)((function(){m&&I(m.reduce((function(e,n){return e+n.word.pointValue}),0))}),[m]),T("updateFoundWords",(function(e){h(e)})),i&&n&&void 0!==m?(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(b,{date:i.date,username:r}),(0,t.jsx)("div",{className:"min-w-[260px] w-full max-w-screen-lg mx-auto px-3",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:gap-8 sm:flex-row-reverse",children:[(0,t.jsxs)("div",{className:"flex flex-grow flex-col gap-4 sm:max-w-[50%]",children:[(0,t.jsx)(w,{currentScore:U,maxScore:i.maxScore}),(0,t.jsx)("div",{className:"hidden sm:block h-full",children:(0,t.jsx)(v,{foundWords:m})}),(0,t.jsx)("div",{className:"sm:hidden",children:(0,t.jsx)(v,{foundWords:m,collapsible:!0})})]}),(0,t.jsxs)("div",{className:"flex flex-grow flex-col gap-4 justify-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d,{value:_,outerLetters:i.outerLetters,centerLetter:i.centerLetter,onChange:function(e){return function(e,n,r,t,o,s){/[a-zA-Z]/.test(e)&&1===e.length?L(e,o,s):"Backspace"===e?S(o,s):"Enter"===e&&z(n,r,t,o,s)}(e,r,n,R,_,A)}}),(0,t.jsx)(O,{})]}),(0,t.jsx)(l,{outerLetters:j,centerLetter:i.centerLetter,onClick:function(e){return L(e,_,A)}}),(0,t.jsxs)("div",{className:"flex flex-col xs:flex-row gap-4 justify-center my-6",children:[(0,t.jsx)(u.Z,{onClick:function(){return S(_,A)},children:"Delete"}),(0,t.jsx)(f,{onClick:function(){g(function(e){for(var n in e=k(e)){var r=Math.floor(Math.random()*parseInt(n,10)),t=e[n];e[n]=e[r],e[r]=t}return e}(j))}}),(0,t.jsx)(u.Z,{onClick:function(){return z(r,n,R,_,A)},children:"Enter"})]})]})]})})]}):(0,t.jsx)(y,{})}}},function(e){e.O(0,[510,774,888,179],(function(){return n=8891,e(e.s=n);var n}));var n=e.O();_N_E=n}]);